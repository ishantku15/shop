// Data for Mod APKs
const modAPKs = [
    {
        id: 1,
        name: "YouTube Premium",
        icon: "images/ytlogo.png",
        version: "18.23.35",
        size: "85 MB",
        category: "social",
        description: "YouTube Premium mod APK with background play, ad-free experience, and download features unlocked.",
        features: [
            "Ad-free viewing",
            "Background play",
            "Download videos",
            "Picture-in-picture mode",
            "Premium features unlocked"
        ],
        screenshots: [
            "images/youtube-ss1.jpg",
            "images/youtube-ss2.jpg",
            "images/youtube-ss3.jpg"
        ],
        downloadLink: "https://drive.google.com/example-link-1",
        filename: "YouTube_Premium_v18.23.35_Mod.apk",
        updated: "2023-10-15"
    },
    {
        id: 2,
        name: "Spotify Premium",
        icon: "images/slogo.jpg",
        version: "8.8.32.612",
        size: "45 MB",
        category: "Music",
        description: "Spotify Premium mod APK with unlimited skips, no ads, extreme quality, and download features.",
        features: [
            "Ad-free music",
            "Unlimited skips",
            "Extreme quality",
            "Download songs",
            "Premium unlocked"
        ],
        screenshots: [
            "images/spotify.png",
            "images/spotify2.png",
            "images/spotify1.png"
        ],
        downloadLink: "https://drive.usercontent.google.com/download?id=1cu_yERGeTeoq2ha8INyvQ3PCUwNnwZ25&export=download&authuser=0",
        filename: "Spotify_Premium_v8.8.32.612_Mod.apk",
        updated: "2023-10-10"
    },
    {
        id: 3,
        name: "Instander",
        icon: "images/instander.png",
        version: "1.20.1",
        size: "120 MB",
        category: "Social",
        description: "Instander is an Instagram Mod APK that lets you download high-quality photos, videos, IGTV and reels. It also offers extra features like no ads, and the ability to copy bios, comments, descriptions and and many more.",
        features: [
            "Full version unlocked",
            "No license verification",
            "Premium skins",
            "Multiplayer support",
            "Regular updates"
        ],
        screenshots: [
            "images/insta.png",
            "images/options.png",
            "images/minecraft-ss3.jpg"
        ],
        downloadLink: "https://drive.google.com/file/d/1CKP8grLXMaLTJPVpPxqFxQo6TilBLBB0/view",
        filename: "Minecraft_Premium_v1.20.1_Mod.apk",
        updated: "2023-10-05"
    },
    {
        id: 4,
        name: "PhotoShop Express",
        icon: "images/photoshop-icon.png",
        version: "7.2.597",
        size: "95 MB",
        category: "productivity",
        description: "PhotoShop Express premium mod APK with all premium filters, tools, and no watermark features.",
        features: [
            "All premium filters",
            "No watermark",
            "Advanced editing tools",
            "Premium effects",
            "High-quality exports"
        ],
        screenshots: [
            "images/photoshop-ss1.jpg",
            "images/photoshop-ss2.jpg",
            "images/photoshop-ss3.jpg"
        ],
        downloadLink: "https://drive.google.com/example-link-4",
        filename: "PhotoShop_Express_v7.2.597_Mod.apk",
        updated: "2023-09-28"
    },
    
    // In the modAPKs array (add this as a new element)
{
    id: 6, // Next ID after the existing 5 APKs
    name: "WhatsApp Premium",
    icon: "images/whatsapp-icon.png",
    version: "2.23.16.76",
    size: "65 MB",
    category: "social",
    description: "WhatsApp Premium mod with enhanced privacy features, customization options, and removed limitations.",
    features: [
        "Hide online status",
        "View deleted messages",
        "Custom themes and styles",
        "Increased media sharing limits",
        "Anti-ban protection",
        "Message scheduling",
        "Premium features unlocked"
    ],
    screenshots: [
        "images/whatsapp-ss1.jpg",
        "images/whatsapp-ss2.jpg",
        "images/whatsapp-ss3.jpg"
    ],
    downloadLink: "https://drive.google.com/file/d/your-unique-file-id/view?usp=sharing",
    filename: "WhatsApp_Premium_v2.23.16.76_Mod.apk",
    updated: "2023-11-05"
},
    

    
];

// Data for Movies
const movies = [
    {
        id: 1,
        title: "Squid Game season 1",
        poster: "images/sgs.jpg",
        year: "2021",
        genre: "action",
        rating: "8.4/10",
        duration: "5-6 Hours",
        plot: "Squid Game Season 1 is a South Korean survival drama series that follows 456 financially desperate contestants who participate in a mysterious survival game for a chance to win 45.6 billion won. The catch? The games are deadly.",
        director: "Hwang Dong-hyuk",
        cast: "Lee Jung-jae, Park Hae-soo, Wi Ha-joon, Jung Ho-yeon, O Yeong-su, Anupam Tripathi, Heo Sung-tae, Kim Joo-ryoung, Lee Byung-hun, Gong Yoo",
        language: "English + Hindi",
        quality: "720p",
        screenshots: [
            "images/sg01.png",
            "images/sgs2.png",
            "images/sg01.jpg"
        ],
        downloadLink: "https://drive.google.com/drive/folders/1rh1usmavKIthJQTyITuEqChyr7vwL55z?usp=drive_link",
        filename: "Squid Game season 1 720p .mkv",
        filesize: "4GB(approx)",
        format: "MP4"
    },
    {
        id: 2,
        title: "Chhaava",
        poster: "images/ch.jpg",
        year: "2025",
        genre: "Adventuredrama",
        rating: "7.8/10",
        duration: "2h 35m",
        plot: "",
        director: " Laxman Utekar",
        cast: "",
        language: "Hindi",
        quality: "720p",
        screenshots: [
            "images/joker-ss1.jpg",
            "images/joker-ss2.jpg",
            "images/joker-ss3.jpg"
        ],
        downloadLink: "https://drive.google.com/file/d/1N2HIA-OO9eUjCrdEi9Qaw33lomy96_UA/view",
        filename: "",
        filesize: "2.3 GB",
        format: "MP4"
    },
    {
        id: 3,
        title: "Highway",
        poster: "images/highway.jpg",
        year: "2014",
        genre: "Romance/Adventure",
        rating: "7.6/10",
        duration: "2h 13m",
        plot: "",
        director: "",
        cast: "",
        language: "",
        quality: "720p",
        screenshots: [
            "images/parasite-ss1.jpg",
            "images/parasite-ss2.jpg",
            "images/parasite-ss3.jpg"
        ],
        downloadLink: "https://drive.google.com/file/d/1hSPCH_wnf4Vj4whsEFtUn1-w48JPja2v/view?t=1",
        filename: "",
        filesize: "2.1 GB",
        format: "MP4"
    },
    {
        id: 4,
        title: "Dear Zindagi",
        poster: "images/dear.jpg",
        year: "2016",
        genre: "Drama",
        rating: "7.4/10",
        duration: "2h 31m",
        plot: "",
        director: "",
        cast: "",
        language: "Hindi",
        quality: "720p",
        screenshots: [
            "images/darkknight-ss1.jpg",
            "images/darkknight-ss2.jpg",
            "images/darkknight-ss3.jpg"
        ],
        downloadLink: "https://drive.google.com/file/d/1GYU-ED6XxX-EdAOdk-9hzPpl_EML511I/view",
        filename: "",
        filesize: "1.3 GB",
        format: "MP4"
    },
    {
        id: 5,
        title: "Yeh Jawaani Hai Deewani (ये जवानी है दीवानी",
        poster: "images/yeh.jpg",
        year: "2013",
        genre: " Romance/Comedy",
        rating: "703/10",
        duration: "2h 40m",
        plot: "",
        director: "",
        cast: "",
        language: "",
        quality: "720p",
        screenshots: [
            "images/inception-ss1.jpg",
            "images/inception-ss2.jpg",
            "images/inception-ss3.jpg"
        ],
        downloadLink: "https://drive.google.com/file/d/16GipvxIc2mk0-zfwTU_XpIbXUovRvuf2/view",
        filename:"",
        filesize: "2.6 GB",
        format: "MP4"
    },

    {
        id: 6,
        title: "Jigra",
        poster: "images/ems.jpg",
        year: "2024",
        genre: " Action",
        rating: "7.3/10",
        duration: "2h 33m",
        plot: "",
        director: "",
        cast: "",
        language: "",
        quality: "720p",
        screenshots: [
            "images/inception-ss1.jpg",
            "images/inception-ss2.jpg",
            "images/inception-ss3.jpg"
        ],
        downloadLink: "https://drive.google.com/file/d/10iKJRbAu-BkAHRHSKLxksdDIdAYKk_ac/view",
        filename:"",
        filesize: "2.6 GB",
        format: "MP4"
    },
    {
        id: 7,
        title: "CTRL",
        poster: "images/ctrl.jpg",
        year: "2024",
        genre: " Drama",
        rating: "6.2/10",
        duration: "1h 39m",
        plot: "",
        director: "",
        cast: "",
        language: "",
        quality: "720p",
        screenshots: [
            "images/inception-ss1.jpg",
            "images/inception-ss2.jpg",
            "images/inception-ss3.jpg"
        ],
        downloadLink: "https://drive.google.com/file/d/1usKPLjlw8Qwvcu9E-gFWtobnsS_6dClZ/view",
        filename:"",
        filesize: "2.6 GB",
        format: "MP4"
    },
    
    {
        id: 8,
        title: "WEDNESDAY S1",
        poster: "images/web.jpg",
        year: "2022",
        genre: " horror",
        rating: "8/10",
        duration: "6h 39m",
        plot: "",
        director: "",
        cast: "",
        language: "",
        quality: "720p",
        screenshots: [
            "images/inception-ss1.jpg",
            "images/inception-ss2.jpg",
            "images/inception-ss3.jpg"
        ],
        downloadLink: "https://drive.google.com/drive/folders/1lzU338D_eH6ONIaK-HFJUdwSkcqZ_AEw?usp=drive_link",
        filename:"",
        filesize: "2.6 GB",
        format: "MP4"
    },
    {
        id: 9,
        title: "Squid Game season 2",
        poster: "images/sgs1.jpg",
        year: "2024",
        genre: "action",
        rating: "8.4/10",
        duration: "5-6 Hours",
        plot: "Squid Game Season 1 is a South Korean survival drama series that follows 456 financially desperate contestants who participate in a mysterious survival game for a chance to win 45.6 billion won. The catch? The games are deadly.",
        director: "Hwang Dong-hyuk",
        cast: "Lee Jung-jae, Park Hae-soo, Wi Ha-joon, Jung Ho-yeon, O Yeong-su, Anupam Tripathi, Heo Sung-tae, Kim Joo-ryoung, Lee Byung-hun, Gong Yoo",
        language: "English + Hindi",
        quality: "720p",
        screenshots: [
            "images/sg01.png",
            "images/sgs2.png",
            "images/sg01.jpg"
        ],
        downloadLink: "https://drive.google.com/drive/folders/1DgE-MwJZ0-5Ov6vVBim9zXbM7nCiVX2W?usp=drive_link",
        filename: "Squid Game season 1 720p .mkv",
        filesize: "4GB(approx)",
        format: "MP4"
    },
];

// DOM Content Loaded Event
document.addEventListener('DOMContentLoaded', function() {
    // Check current page and load appropriate content
    const path = window.location.pathname.split('/').pop();
    
    if (path === 'index.html' || path === '') {
        loadFeaturedAPKs();
        loadFeaturedMovies();
    } else if (path === 'mod-apk.html') {
        loadAllAPKs();
        setupAPKSearch();
    } else if (path === 'movie.html') {
        loadAllMovies();
        setupMovieSearch();
    } else if (path === 'apk-detail.html') {
        loadAPKDetails();
    } else if (path === 'movie-detail.html') {
        loadMovieDetails();
    }
});

// Load Featured APKs on Homepage
function loadFeaturedAPKs() {
    const featuredAPKsContainer = document.getElementById('featured-apks');
    if (!featuredAPKsContainer) return;

    // Get first 3 APKs
    const featuredAPKs = modAPKs.slice(0, 3);
    
    featuredAPKs.forEach(apk => {
        const apkElement = createAPKElement(apk);
        featuredAPKsContainer.appendChild(apkElement);
    });
}

// Load All APKs in Mod APK Page
function loadAllAPKs() {
    const apkGrid = document.getElementById('apk-grid');
    if (!apkGrid) return;
    
    apkGrid.innerHTML = '';
    
    modAPKs.forEach(apk => {
        const apkElement = createAPKElement(apk);
        apkGrid.appendChild(apkElement);
    });
}

// Create APK Grid Item Element
function createAPKElement(apk) {
    const apkElement = document.createElement('div');
    apkElement.className = 'grid-item';
    apkElement.innerHTML = `
        <a href="apk-detail.html?id=${apk.id}">
            <img src="${apk.icon}" alt="${apk.name}">
            <div class="item-info">
                <h4>${apk.name}</h4>
                <p>${apk.description.substring(0, 60)}...</p>
                <div class="item-meta">
                    <span>${apk.version}</span>
                    <span>${apk.size}</span>
                </div>
            </div>
        </a>
    `;
    return apkElement;
}

// Load Featured Movies on Homepage
function loadFeaturedMovies() {
    const featuredMoviesContainer = document.getElementById('featured-movies');
    if (!featuredMoviesContainer) return;

    // Get first 3 movies
    const featuredMovies = movies.slice(0, 3);
    
    featuredMovies.forEach(movie => {
        const movieElement = createMovieElement(movie);
        featuredMoviesContainer.appendChild(movieElement);
    });
}

// Load All Movies in Movie Page
function loadAllMovies() {
    const movieGrid = document.getElementById('movie-grid');
    if (!movieGrid) return;
    
    movieGrid.innerHTML = '';
    
    movies.forEach(movie => {
        const movieElement = createMovieElement(movie);
        movieGrid.appendChild(movieElement);
    });
}

// Create Movie Grid Item Element
function createMovieElement(movie) {
    const movieElement = document.createElement('div');
    movieElement.className = 'grid-item';
    movieElement.innerHTML = `
        <a href="movie-detail.html?id=${movie.id}">
            <img src="${movie.poster}" alt="${movie.title}">
            <div class="item-info">
                <h4>${movie.title}</h4>
                <p>${movie.plot.substring(0, 60)}...</p>
                <div class="item-meta">
                    <span>${movie.year}</span>
                    <span>${movie.rating}</span>
                </div>
            </div>
        </a>
    `;
    return movieElement;
}

// Setup APK Search Functionality
function setupAPKSearch() {
    const searchInput = document.getElementById('apk-search');
    const categoryFilter = document.getElementById('apk-category');
    
    if (searchInput) {
        searchInput.addEventListener('input', searchAPKs);
    }
    
    if (categoryFilter) {
        categoryFilter.addEventListener('change', searchAPKs);
    }
}

// Search APKs based on input and filter
function searchAPKs() {
    const searchInput = document.getElementById('apk-search');
    const categoryFilter = document.getElementById('apk-category');
    const apkGrid = document.getElementById('apk-grid');
    
    if (!searchInput || !categoryFilter || !apkGrid) return;
    
    const searchTerm = searchInput.value.toLowerCase();
    const selectedCategory = categoryFilter.value;
    
    apkGrid.innerHTML = '';
    
    const filteredAPKs = modAPKs.filter(apk => {
        const matchesSearch = apk.name.toLowerCase().includes(searchTerm) || 
                             apk.description.toLowerCase().includes(searchTerm);
        const matchesCategory = selectedCategory === 'all' || apk.category === selectedCategory;
        
        return matchesSearch && matchesCategory;
    });
    
    if (filteredAPKs.length === 0) {
        apkGrid.innerHTML = '<p class="no-results">No APKs found matching your criteria.</p>';
    } else {
        filteredAPKs.forEach(apk => {
            const apkElement = createAPKElement(apk);
            apkGrid.appendChild(apkElement);
        });
    }
}

// Setup Movie Search Functionality
function setupMovieSearch() {
    const searchInput = document.getElementById('movie-search');
    const genreFilter = document.getElementById('movie-genre');
    
    if (searchInput) {
        searchInput.addEventListener('input', searchMovies);
    }
    
    if (genreFilter) {
        genreFilter.addEventListener('change', searchMovies);
    }
}

// Search Movies based on input and filter
function searchMovies() {
    const searchInput = document.getElementById('movie-search');
    const genreFilter = document.getElementById('movie-genre');
    const movieGrid = document.getElementById('movie-grid');
    
    if (!searchInput || !genreFilter || !movieGrid) return;
    
    const searchTerm = searchInput.value.toLowerCase();
    const selectedGenre = genreFilter.value;
    
    movieGrid.innerHTML = '';
    
    const filteredMovies = movies.filter(movie => {
        const matchesSearch = movie.title.toLowerCase().includes(searchTerm) || 
                             movie.plot.toLowerCase().includes(searchTerm);
        const matchesGenre = selectedGenre === 'all' || movie.genre === selectedGenre;
        
        return matchesSearch && matchesGenre;
    });
    
    if (filteredMovies.length === 0) {
        movieGrid.innerHTML = '<p class="no-results">No movies found matching your criteria.</p>';
    } else {
        filteredMovies.forEach(movie => {
            const movieElement = createMovieElement(movie);
            movieGrid.appendChild(movieElement);
        });
    }
}

// Load APK Details Page
function loadAPKDetails() {
    const urlParams = new URLSearchParams(window.location.search);
    const apkId = parseInt(urlParams.get('id'));
    
    const apk = modAPKs.find(a => a.id === apkId);
    if (!apk) {
        window.location.href = 'mod-apk.html';
        return;
    }
    
    // Update page title
    document.getElementById('apk-title').textContent = `${apk.name} - Ishant_Shop`;
    
    // Update APK details
    document.getElementById('apk-icon').src = apk.icon;
    document.getElementById('apk-icon').alt = apk.name;
    document.getElementById('detail-apk-name').textContent = apk.name;
    document.getElementById('apk-version').textContent = `Version: ${apk.version}`;
    document.getElementById('apk-size').textContent = `Size: ${apk.size}`;
    document.getElementById('apk-category').textContent = `Category: ${apk.category.charAt(0).toUpperCase() + apk.category.slice(1)}`;
    document.getElementById('apk-description').textContent = apk.description;
    document.getElementById('apk-filename').textContent = apk.filename;
    document.getElementById('apk-updated').textContent = apk.updated;
    
    // Update features list
    const featuresList = document.getElementById('apk-features');
    featuresList.innerHTML = '';
    apk.features.forEach(feature => {
        const li = document.createElement('li');
        li.textContent = feature;
        featuresList.appendChild(li);
    });
    
    // Update screenshots
    const screenshotsContainer = document.getElementById('apk-screenshots');
    screenshotsContainer.innerHTML = '';
    apk.screenshots.forEach(screenshot => {
        const img = document.createElement('img');
        img.src = screenshot;
        img.alt = `${apk.name} screenshot`;
        screenshotsContainer.appendChild(img);
    });
    
    // Update download buttons
    const downloadButtons = document.querySelectorAll('.download-btn');
    downloadButtons.forEach(button => {
        button.href = apk.downloadLink;
    });
}

// Load Movie Details Page
function loadMovieDetails() {
    const urlParams = new URLSearchParams(window.location.search);
    const movieId = parseInt(urlParams.get('id'));
    
    const movie = movies.find(m => m.id === movieId);
    if (!movie) {
        window.location.href = 'movie.html';
        return;
    }
    
    // Update page title
    document.getElementById('movie-title').textContent = `${movie.title} - Ishant_Shop`;
    
    // Update movie details
    document.getElementById('movie-poster').src = movie.poster;
    document.getElementById('movie-poster').alt = movie.title;
    document.getElementById('detail-movie-name').textContent = movie.title;
    document.getElementById('movie-year').textContent = `Year: ${movie.year}`;
    document.getElementById('movie-genre').textContent = `Genre: ${movie.genre.charAt(0).toUpperCase() + movie.genre.slice(1)}`;
    document.getElementById('movie-rating').textContent = `Rating: ${movie.rating}`;
    document.getElementById('movie-duration').textContent = `Duration: ${movie.duration}`;
    document.getElementById('movie-plot').textContent = movie.plot;
    document.getElementById('movie-director').textContent = movie.director;
    document.getElementById('movie-cast').textContent = movie.cast;
    document.getElementById('movie-language').textContent = movie.language;
    document.getElementById('movie-quality').textContent = movie.quality;
    document.getElementById('movie-filename').textContent = movie.filename;
    document.getElementById('movie-filesize').textContent = movie.filesize;
    document.getElementById('movie-format').textContent = movie.format;
    
    // Update screenshots
    const screenshotsContainer = document.getElementById('movie-screenshots');
    screenshotsContainer.innerHTML = '';
    movie.screenshots.forEach(screenshot => {
        const img = document.createElement('img');
        img.src = screenshot;
        img.alt = `${movie.title} screenshot`;
        screenshotsContainer.appendChild(img);
    });
    
    // Update download buttons
    const downloadButtons = document.querySelectorAll('.download-btn');
    downloadButtons.forEach(button => {
        button.href = movie.downloadLink;
    });

   // Lightbox functionality - UPDATED VERSION
function initializeLightbox() {
    const modal = document.getElementById("imageModal");
    if (!modal) return; // Exit if modal doesn't exist
    
    const modalImg = document.getElementById("modalImage");
    const captionText = document.getElementById("caption");
    const screenshots = document.querySelectorAll(".screenshots img");
    
    // Exit if no screenshots found
    if (screenshots.length === 0) return;

    let currentIndex = 0;

    // Function to open modal
    const openModal = (index) => {
        modal.style.display = "block";
        modalImg.src = screenshots[index].src;
        captionText.innerHTML = `Screenshot ${index + 1} of ${screenshots.length}`;
        currentIndex = index;
    };

    // Add click events to all screenshots
    screenshots.forEach((img, index) => {
        img.addEventListener('click', () => openModal(index));
    });

    // Close modal
    document.querySelector(".close").addEventListener('click', () => {
        modal.style.display = "none";
    });

    // Navigation
    document.querySelector(".prev").addEventListener('click', () => {
        openModal((currentIndex - 1 + screenshots.length) % screenshots.length);
    });

    document.querySelector(".next").addEventListener('click', () => {
        openModal((currentIndex + 1) % screenshots.length);
    });

    // Close when clicking outside
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.style.display = "none";
        }
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
        if (modal.style.display === "block") {
            switch(e.key) {
                case 'ArrowLeft':
                    openModal((currentIndex - 1 + screenshots.length) % screenshots.length);
                    break;
                case 'ArrowRight':
                    openModal((currentIndex + 1) % screenshots.length);
                    break;
                case 'Escape':
                    modal.style.display = "none";
                    break;
            }
        }
    });
}

// Update your detail page loading functions
function loadAPKDetails() {
    // ... your existing APK detail loading code ...
    initializeLightbox(); // Add this at the end
}

function loadMovieDetails() {
    // ... your existing movie detail loading code ...
    initializeLightbox(); // Add this at the end
}
}